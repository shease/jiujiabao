webpackJsonp([69,356],{3:function(t,e,o){var i,a;o(6),i=o(4);var s=o(7);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=s.render,a.staticRenderFns=s.staticRenderFns,a._scopeId="data-v-3bb525bc",t.exports=i},4:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(8);e.default={props:["text","hide","totext","tolink","goback"],data:function(){return{toi:this.fun.getKeyByI()}},activated:function(){console.log("统计代码run");var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?651798cf44d298ed46b435d750cc920c";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),console.log("统计代码run")},mounted:function(){},methods:{goto:function(){window.history.length<=1?this.$router.push(this.fun.getUrl("home",{})):this.$router.go(-1)}}},t.exports=e.default},5:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,".mint-header[data-v-3bb525bc]{background:none;color:#666}.is-fixed .mint-header-title[data-v-3bb525bc]{font-weight:700}.mint-header.is-fixed[data-v-3bb525bc]{border-bottom:1px solid #e8e8e8;border-bottom:.0625rem solid #e8e8e8;background:#fff;z-index:99}.is-right a[data-v-3bb525bc]{font-size:10px}",""])},6:function(t,e,o){var i=o(5);"string"==typeof i&&(i=[[t.id,i,""]]);o(2)(i,{});i.locals&&(t.exports=i.locals)},7:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.hide?t._e():o("mt-header",{attrs:{fixed:"",title:t.text}},[t.goback?t._e():o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.goto},slot:"left"}),t._v(" "),t.tolink?[o("router-link",{staticStyle:{"font-size":"0.9rem"},attrs:{slot:"right",to:t.fun.getUrl(t.tolink)},slot:"right"},[t._v(t._s(t.totext))])]:t._e()],2)],1)},staticRenderFns:[]}},799:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1215),s=i(a);e.default=s.default,t.exports=e.default},1215:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(3),s=i(a),d=(o(3145),o(9));e.default={components:{cTitle:s.default},data:function(){return{cargon_data:{title:"",sku:"",thumb:"",price:"",market_price:"",cost_price:"",stock:""},imageUrl:"",uploadUrl:"",fileList1:[],fileList2:[],upNumMax:0,options:[],selectedOptions3:[],sectionOptions:[],jumpState:!0}},activated:function(){this.init(),this.urlUp(),this.getClassifyJson(),this.getGoodsJson()},methods:{init:function(){for(var t in this.cargon_data)this.cargon_data[t]="";this.imageUrl="",this.selectedOptions3=[],this.fileList1=[],this.fileList2=[],this.upNumMax=0},getGoodsJson:function(){var t=this;if("store"==t.$route.params.store)var e="plugin.store-cashier.frontend.store.goods.get-goods-detail",o={goods_id:t.$route.params.goods_id};else if("supplier"==t.$route.params.store)var e="plugin.supplier.frontend.goods.goods-detail",o={goods_id:t.$route.params.goods_id};$http.post(e,o).then(function(e){if(console.log("显示editJson",e),1==e.result){if(t.selectedOptions3=[],t.selectedOptions3=[Number(e.data.category_ids.parentid),Number(e.data.category_ids.childid),Number(e.data.category_ids.thirdid)],t.cargon_data.title=e.data.title,t.cargon_data.sku=e.data.sku,t.imageUrl=e.data.thumb,t.cargon_data.thumb=e.data.thumb,null!=e.data.thumb_url&&""!=e.data.thumb_url){t.fileList1=[],t.fileList2=[],t.upNumMax=e.data.thumb_url.length;for(var o=0;o<e.data.thumb_url.length;o++)t.fileList1.push({url:e.data.thumb_url[o]}),t.fileList2.push({url:e.data.thumb_url[o]})}t.cargon_data.price=e.data.price,t.cargon_data.market_price=e.data.market_price,t.cargon_data.cost_price=e.data.cost_price,t.cargon_data.stock=e.data.stock}else t.$message.error(e.msg)},function(t){console.log(t)})},getClassifyJson:function(){var t=this;if("store"==t.$route.params.store){var e={store_id:t.$route.params.store_id};$http.get("plugin.store-cashier.frontend.store.goods-category.get-category-by-store-id",e).then(function(e){if(console.log("显示分类edit",e),1==e.result){t.sectionOptions=[];for(var o=0;o<e.data.list.length;o++){t.sectionOptions.push({id:e.data.list[o].id,value:e.data.list[o].id,label:e.data.list[o].name,children:[]});for(var i=0;i<e.data.list[o].childrens.length;i++)t.sectionOptions[o].children.push({id:e.data.list[o].childrens[i].id,value:e.data.list[o].childrens[i].id,label:e.data.list[o].childrens[i].name})}console.log("---option----",t.sectionOptions),t.options=t.sectionOptions}else t.$message.error(e.msg)},function(t){console.log(t)})}else if("supplier"==t.$route.params.store){var o={};$http.post("plugin.supplier.frontend.goods.get-category",o).then(function(e){if(console.log("显示分类edit",e),1==e.result){t.sectionOptions=[];for(var o=0;o<e.data.length;o++)if(t.sectionOptions.push({id:e.data[o].id,value:e.data[o].id,label:e.data[o].name}),!e.data[o].childrens||e.data[o].childrens.length<1);else{t.sectionOptions[o].children=[];for(var i=0;i<e.data[o].childrens.length;i++)if(t.sectionOptions[o].children.push({id:e.data[o].childrens[i].id,value:e.data[o].childrens[i].id,label:e.data[o].childrens[i].name}),!e.data[o].childrens[i].childrens||e.data[o].childrens[i].childrens.length<1);else{t.sectionOptions[o].children[i].children=[];for(var a=0;a<e.data[o].childrens[i].childrens.length;a++)t.sectionOptions[o].children[i].children.push({id:e.data[o].childrens[i].childrens[a].id,value:e.data[o].childrens[i].childrens[a].id,label:e.data[o].childrens[i].childrens[a].name})}}console.log("---option----",t.sectionOptions),t.options=t.sectionOptions}else t.$message.error(e.msg)},function(t){console.log(t)})}},classifyChange:function(t){console.log("选择分类返回值",t),this.selectedOptions3=t},confirmationEditor:function(){var t=this,e=this;if(e.jumpEvent(),1==e.jumpState){var o=[];if(0!=e.fileList1.length)for(var i=0;i<e.fileList1.length;i++)o.push(e.fileList1[i].url);else o=[];if("store"==e.$route.params.store)var a="plugin.store-cashier.frontend.store.goods.get-goods-detail",s={store_id:e.$route.params.store_id,category_pid:e.selectedOptions3[0],category_cid:e.selectedOptions3[1],goods_id:e.$route.params.goods_id,title:e.cargon_data.title,thumb:e.cargon_data.thumb,thumb_url:o,cost_price:e.cargon_data.cost_price,market_price:e.cargon_data.market_price,price:e.cargon_data.price,sku:e.cargon_data.sku,stock:e.cargon_data.stock};else if("supplier"==e.$route.params.store){var a="plugin.supplier.frontend.goods.edit-goods",s={goods_id:e.$route.params.goods_id,title:e.cargon_data.title,thumb:e.cargon_data.thumb,thumb_url:o,cost_price:e.cargon_data.cost_price,market_price:e.cargon_data.market_price,price:e.cargon_data.price,sku:e.cargon_data.sku,stock:e.cargon_data.stock};if(e.selectedOptions3.length<2)return document.documentElement.scrollTop=0,document.body.scrollTop=0,this.$refs.classify.className="classify",setTimeout(function(){t.$refs.classify.className=""},3e3),void e.$message.error("必须选择二级分类");e.selectedOptions3.length<3?(s.category_pid=e.selectedOptions3[0],s.category_cid=e.selectedOptions3[1]):(s.category_pid=e.selectedOptions3[0],s.category_cid=e.selectedOptions3[1],s.category_tid=e.selectedOptions3[2])}$http.post(a,s).then(function(t){console.log("显示",t),1==t.result?(e.$router.go(-1),e.$message({message:"修改成功",type:"success"})):e.$message.error(t.msg)},function(t){console.log(t)})}else e.$message({message:"商品信息不完整",type:"warning"})},jumpEvent:function(){this.jumpState=!0;for(var t in this.cargon_data)""==this.cargon_data[t]&&(this.jumpState=!1);0==this.selectedOptions3.length&&(this.jumpState=!1),""==this.imageUrl&&(this.jumpState=!1),console.log("--state----",this.jumpState)},urlUp:function(){var t=document.getElementsByClassName("el-cascader__label")[0];t.style.lineHeight="48px",this.uploadUrl=this.fun.getRealUrl("plugin.store-cashier.frontend.store.goods.upload",{})},handleStoreSuccess:function(t,e){console.log(t),this.imageUrl=URL.createObjectURL(e.raw),1==t.result?this.cargon_data.thumb=t.data.img:(0,d.Toast)(t.msg)},beforeUpload:function(t){var e="image/png"===t.type||"image/jpeg"===t.type,o=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&o},handleAptiSuccess:function(t,e){console.log("------param-----",t,e),1==t.result?this.fileList1.push({url:t.data.img}):(0,d.Toast)(t.msg)},handleAptiRemove:function(t,e){console.log("handleStoreRemove:",t,e),this.upNumMax=e.length;var o=t.url;if(o){var i="";this.fileList1.forEach(function(t,e,a){t.url==o&&(i=e)}),this.fileList1.splice(i,1)}console.log("bingqilin",this.fileList1)},occlusion:function(){this.$message.warning("图片数量已达到上限")},handleChange:function(t,e){console.log("change--u",t,e),this.upNumMax=e.length}}},t.exports=e.default},1327:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,".avatar[data-v-05868c38]{width:100%;height:100%}.el-cascader[data-v-05868c38]{width:250px;width:15.625rem}#goods-edit[data-v-05868c38]{text-align:left;padding-top:40px;padding-top:2.5rem;padding-bottom:62px;padding-bottom:3.875rem}#goods-edit .classify[data-v-05868c38]{animation:myfirst 3s}@keyframes myfirst{0%{background:#f15353}to{background:#fff}}#goods-edit #edit-b[data-v-05868c38]{background-color:#fff;margin-top:10px;margin-top:.625rem}#goods-edit #edit-b .bottom[data-v-05868c38],#goods-edit #edit-b .top[data-v-05868c38]{-padding:0 14px;-padding:0 .875rem;font-size:14px}#goods-edit #edit-b .bottom h1[data-v-05868c38],#goods-edit #edit-b .top h1[data-v-05868c38]{line-height:36px;line-height:2.25rem;text-align:left;font-weight:400}#goods-edit #edit-b .bottom .icon[data-v-05868c38],#goods-edit #edit-b .top .icon[data-v-05868c38]{padding-top:18px;padding-top:1.125rem;width:72px;width:4.5rem;height:72px;height:4.5rem;background-color:#fafafa;font-size:12px}#goods-edit #edit-b .bottom .icon i[data-v-05868c38],#goods-edit #edit-b .top .icon i[data-v-05868c38]{padding:2px;padding:.125rem;background-color:#fff;border:1px solid #ebebeb;border:.0625rem solid #ebebeb;border-radius:1.25rem}#goods-edit #edit-b .bottom .icon span[data-v-05868c38],#goods-edit #edit-b .top .icon span[data-v-05868c38]{display:block;margin-top:4px;margin-top:.25rem}#goods-edit #edit-b .bottom[data-v-05868c38]{border-bottom:none}#goods-edit #edit-b .top .goods-header[data-v-05868c38]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;height:60px;height:3.75rem;line-height:60px;line-height:3.75rem}#goods-edit #edit-b .top .goods-header .fa[data-v-05868c38]{font-size:24px;font-size:1.5rem;color:#c9c9c9;position:absolute;right:14px;right:.875rem;line-height:60px;line-height:3.75rem}#goods-edit #edit-goods-img[data-v-05868c38]{margin-top:10px;margin-top:.625rem;background-color:#fff;font-size:16px;text-align:left;padding:0 14px 10px;padding:0 .875rem .625rem}#goods-edit #edit-goods-img span[data-v-05868c38]{display:block;line-height:36px;line-height:2.25rem}#goods-edit #edit-goods-img .img-box[data-v-05868c38]{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}#goods-edit #edit-goods-img .img-box .img[data-v-05868c38]{width:78px;width:4.875rem;height:78px;height:4.875rem;border-radius:.125rem;overflow:hidden;background-color:#fafafa;margin-top:10px;margin-top:.625rem}#goods-edit #edit-goods-img .img-box .icon[data-v-05868c38]{z-index:10;width:22px;width:1.375rem;height:22px;height:1.375rem;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;background-color:#ccc;border-radius:50%;border:2px solid #fff;border:.125rem solid #fff;position:relative;left:-86px;left:-5.375rem;top:4px;top:.25rem}#goods-edit #edit-goods-img .img-box .icon i[data-v-05868c38]{font-size:12px;font-size:.75rem;color:#fff;line-height:20px;line-height:1.25rem;display:block}#goods-edit #edit-a[data-v-05868c38],#goods-edit #edit-c[data-v-05868c38]{margin-top:10px;margin-top:.625rem;background-color:#fff}#goods-edit #edit-a ul li[data-v-05868c38],#goods-edit #edit-c ul li[data-v-05868c38]{height:44px;height:2.75rem;line-height:44px;line-height:2.75rem;padding:0 14px;padding:0 .875rem;border-bottom:1px solid #ebebeb;border-bottom:.0625rem solid #ebebeb;font-size:16px;text-align:left}#goods-edit #edit-a ul li input[data-v-05868c38],#goods-edit #edit-c ul li input[data-v-05868c38]{border:none;color:#8c8c8c}#goods-edit #edit-a ul li[data-v-05868c38]:last-child{border:none}#goods-edit #edit-a ul li:last-child i[data-v-05868c38]{font-size:24px;font-size:1.5rem;color:#c9c9c9;position:absolute;right:14px;right:.875rem;line-height:44px;line-height:2.75rem}#goods-edit #edit-a ul li:last-child input[data-v-05868c38]{font-size:14px}#goods-edit #edit-d[data-v-05868c38]{margin-top:10px;margin-top:.625rem;background-color:#fff}#goods-edit #edit-d ul li[data-v-05868c38]{height:44px;height:2.75rem;line-height:44px;line-height:2.75rem;padding:0 14px;padding:0 .875rem;border-bottom:1px solid #ebebeb;border-bottom:.0625rem solid #ebebeb;font-size:16px;text-align:left}#goods-edit #edit-d ul li[data-v-05868c38]:last-child,#goods-edit #edit-d ul li input[data-v-05868c38]{border:none}#goods-edit #btn[data-v-05868c38]{background-color:#fff;width:100%;position:fixed;bottom:0;z-index:100;border-top:1px solid #ebebeb;border-top:.0625rem solid #ebebeb;padding:0 14px;padding:0 .875rem;margin-top:20px;margin-top:1.25rem}#goods-edit #btn button[data-v-05868c38]{height:40px;height:2.5rem;line-height:40px;line-height:2.5rem;border-radius:.1875rem;margin:6px 0;margin:.375rem 0;width:100%;color:#fff;font-size:16px;border:none;background-color:#f15353}",""])},1738:function(t,e,o){var i=o(1327);"string"==typeof i&&(i=[[t.id,i,""]]);o(2)(i,{});i.locals&&(t.exports=i.locals)},2320:function(t,e){function o(){throw new Error("tty.ReadStream is not implemented")}function i(){throw new Error("tty.ReadStream is not implemented")}e.isatty=function(){return!1},e.ReadStream=o,e.WriteStream=i},2694:function(t,e,o){var i,a;o(1738),i=o(799);var s=o(2776);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=s.render,a.staticRenderFns=s.staticRenderFns,a._scopeId="data-v-05868c38",t.exports=i},2776:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{attrs:{id:"goods-edit"}},[o("c-title",{attrs:{hide:!1,text:"商品编辑"}}),t._v(" "),o("section",{attrs:{id:"edit-a"}},[o("mt-field",{attrs:{label:"商品名称:",placeholder:"请输入商品名称"},model:{value:t.cargon_data.title,callback:function(e){t.$set(t.cargon_data,"title",e)},expression:"cargon_data.title"}}),t._v(" "),o("mt-field",{attrs:{label:"商品单位:",placeholder:"请输入商品单位"},model:{value:t.cargon_data.sku,callback:function(e){t.$set(t.cargon_data,"sku",e)},expression:"cargon_data.sku"}})],1),t._v(" "),o("section",{ref:"classify",staticStyle:{height:"48px",background:"white","margin-top":"10px","line-height":"48px"}},[o("span",{staticStyle:{float:"left","font-size":"16px","padding-left":"10px","box-sizing":"border-box"}},[t._v("商品分类：")]),t._v(" "),o("span",{staticClass:"block",staticStyle:{float:"left"}},[o("el-cascader",{attrs:{"expand-trigger":"click",options:t.options},on:{change:t.classifyChange},model:{value:t.selectedOptions3,callback:function(e){t.selectedOptions3=e},expression:"selectedOptions3"}})],1)]),t._v(" "),o("section",{attrs:{id:"edit-b"}},[o("div",{staticClass:"top"},[t._m(0),t._v(" "),o("div",{staticStyle:{"padding-bottom":"10px","box-sizing":"border-box","text-align":"center"}},[o("div",[o("el-upload",{attrs:{action:t.uploadUrl,"on-preview":t.handlePreview,limit:1,"list-type":"picture-card","show-file-list":!1,"on-exceed":t.handleExceed,"before-upload":t.beforeUpload,"on-success":t.handleStoreSuccess}},[t.imageUrl?o("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):o("i",{staticClass:"el-icon-plus"})])],1)])])]),t._v(" "),o("section",{staticStyle:{background:"white","margin-top":"0.625rem","padding-bottom":"10px","box-sizing":"border-box"}},[t._m(1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-upload",{staticClass:"upload-demo",attrs:{data:{attach:"upload"},"on-change":t.handleChange,action:t.uploadUrl,"on-preview":t.handlePreview,"on-remove":t.handleAptiRemove,"file-list":t.fileList2,"list-type":"picture-card","on-exceed":t.handleExceed,"before-upload":t.beforeUpload,"on-success":t.handleAptiSuccess}},[o("div",{staticStyle:{width:"100%",height:"100%",background:"rgba(45,45,45,0)",position:"relative"}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),t.upNumMax>=4?o("div",{staticStyle:{width:"100%",height:"100%",background:"rgba(45,45,45,0)",position:"absolute",left:"0px",top:"0px","z-index":"2"},on:{click:function(e){e.stopPropagation(),t.occlusion()}}}):t._e()])])],1)]),t._v(" "),o("section",{attrs:{id:"edit-c"}},[o("mt-field",{attrs:{label:"商品现价:",placeholder:"请输入商品现价",type:"number"},model:{value:t.cargon_data.price,callback:function(e){t.$set(t.cargon_data,"price",e)},expression:"cargon_data.price"}}),t._v(" "),o("mt-field",{attrs:{label:"商品原价:",placeholder:"请输入商品原价",type:"number"},model:{value:t.cargon_data.market_price,callback:function(e){t.$set(t.cargon_data,"market_price",e)},expression:"cargon_data.market_price"}}),t._v(" "),o("mt-field",{attrs:{label:"商品成本:",placeholder:"请输入商品成本",type:"number"},model:{value:t.cargon_data.cost_price,callback:function(e){t.$set(t.cargon_data,"cost_price",e)},expression:"cargon_data.cost_price"}})],1),t._v(" "),o("section",{attrs:{id:"edit-d"}},[o("mt-field",{attrs:{label:"商品库存:",placeholder:"请输入商品库存",type:"number"},model:{value:t.cargon_data.stock,callback:function(e){t.$set(t.cargon_data,"stock",e)},expression:"cargon_data.stock"}})],1),t._v(" "),o("section",{attrs:{id:"btn"}},[o("button",{attrs:{type:"button"},on:{click:t.confirmationEditor}},[t._v("确认编辑")])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"3.125rem","text-align":"left","line-height":"3.125rem","padding-left":"10px","box-size":"border-box"}},[o("span",{staticStyle:{"font-size":"16px"}},[t._v("商品图片：")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"50px","text-align":"left","padding-left":"13px","line-height":"50px"}},[o("span",{staticStyle:{"font-size":"16px"}},[t._v("其他图片：")])])}]}},3145:function(t,e,o){(function(e){const i=o(2320);t.exports=function(){var t,o;return i.isatty(1)&&i.isatty(2)?e.stdout.getWindowSize?(t=e.stdout.getWindowSize(1)[0],o=e.stdout.getWindowSize(1)[1]):i.getWindowSize?(t=i.getWindowSize()[1],o=i.getWindowSize()[0]):e.stdout.columns&&e.stdout.rows&&(o=e.stdout.columns,t=e.stdout.rows):new Error("Error: could not get window size with tty or process.stdout"),{height:o,width:t}}()}).call(e,o(231))}});